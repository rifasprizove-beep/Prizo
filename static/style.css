/* === Tipografías estilo Discord === */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@700;800;900&display=swap');

:root{
  /* PRIZO — paleta */
  --bg: #d70056;
  --bg-dark: #b00047;
  --card: #e02574;
  --text: #f9f6ef;
  --muted: #f4dbe3;
  --accent: #f9f6ef;
  --accent-2: #fff3f7;
  --danger: #ffcedd;
  --border: rgba(249,246,239,0.25);

  --font-title: 'Poppins', sans-serif;
  --font-body: 'Inter', sans-serif;
}

/* Que el fondo cubra TODO y no haya scroll lateral */
html, body{
  min-height: 100svh;
  width: 100%;
  margin: 0;
  overflow-x: hidden;
  background: transparent;
  color: var(--text);
  overscroll-behavior: none;
}

/* capa fija detrás que siempre cubre el viewport */
html::before{
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg-dark) 100%);
  will-change: transform;
}

*{ box-sizing:border-box }
img{ max-width:100%; height:auto; display:block }

/* Body por defecto */
body{
  font-family:var(--font-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Header */
.site-header{
  position:sticky; top:0; z-index:5;
  background:rgba(215,0,86,.55);
  backdrop-filter:blur(8px);
  border-bottom:1px solid var(--border);
  overflow-x: clip;
}
.brand{max-width:960px;margin:0 auto;padding:12px 2px;display:flex;align-items:center;gap:12px}
.logo{width:110px;height:auto;display:block}
.tagline{color:var(--muted);font-size:.95rem}

/* --- Brand clickable (logo + nombre) --- */
.brand-link{display:flex;align-items:center;gap:5px;text-decoration:none;color:var(--text)}
.brand-link:hover .brand-name{opacity:1}
.brand-logo{width:35px;height:35px;object-fit:contain;border-radius:6px;background:transparent}
.brand-name{
  font-family:var(--font-title);
  font-weight:900;
  letter-spacing:-0.02em;
  text-transform:uppercase;
  font-size:1.5rem;
  color:var(--text);
  line-height:1;
}

/* Layout */
.container{max-width:960px;margin:24px auto;padding:0 16px;overflow-x: clip;}
.card{
  background:var(--card);
  padding:20px;border-radius:16px;
  box-shadow:0 8px 30px rgba(0,0,0,.25);
  margin-top:16px;border:1px solid var(--border);
  max-width:100%;
  overflow-x: clip;
}

/* Títulos estilo Discord */
h1,h2,h3,.tile-title{
  font-family:var(--font-title);
  font-weight:900;
  letter-spacing:-0.02em;
  text-transform:uppercase;
  color:var(--text);
  line-height:1.05;
}
h1{font-size:clamp(1.4rem,2.8vw,2rem);margin:0 0 12px}
h2{margin:0 0 12px}

/* Texto normal */
p,label,input,select,button,.muted{font-family:var(--font-body);font-weight:400;color:var(--text);line-height:1.5}

/* Inputs y selects (consistencia) */
input, select{
  background:var(--bg-dark);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:12px;
  outline:none;
}
input:focus, select:focus{ border-color:var(--accent); box-shadow:0 0 0 2px rgba(249,246,239,.25) }

/* Oculta flechas de number (mejor en móvil) */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }
input[type="number"]{ -moz-appearance:textfield; appearance:textfield; }

/* Botones */
button{
  background:var(--accent);
  color:#d70056;
  border:none;padding:12px 16px;border-radius:12px;
  font-family:var(--font-title);font-weight:700;text-transform:uppercase;letter-spacing:.5px;
  cursor:pointer;transition:all .2s ease;
}
button:hover{background:var(--accent-2)}
.btn-primary{ background:var(--accent); color:#d70056; }
.btn-secondary{background:var(--bg-dark);color:var(--text)}
.btn-secondary:hover{background:var(--card)}
button.is-busy{opacity:.8; pointer-events:none}

/* Sections */
.section-head{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.back{
  background:none;border:1px solid var(--border);
  color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer;
  font-family:var(--font-title);font-weight:700;text-transform:uppercase;letter-spacing:.5px;
}
.section.hidden{display:none}
.full{width:100%}
.muted{color:var(--muted)}
.prewrap{white-space:pre-wrap}
.center{text-align:center}

/* Grid de formularios básico (2 col en desktop) */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:8px 0}
.grid label{display:flex;flex-direction:column;gap:6px;color:var(--muted);font-size:.95rem}
.grid input, .grid select{
  padding:12px;border-radius:10px;border:1px solid var(--border);
  background:var(--bg-dark);color:var(--text)
}

/* Tiles (dashboard) */
.tiles{display:grid;grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));gap:12px}
.tile{
  background:var(--bg-dark);
  border:1px solid var(--border);
  border-radius:14px;padding:16px;text-align:left;cursor:pointer;
  transition:all .15s ease;color:var(--text)
}
.tile:hover{transform:translateY(-2px);border-color:var(--accent-2);background:var(--card)}
.tile-ico{font-size:1.6rem;margin-bottom:6px}
.tile-title{font-weight:900}
.tile-desc{color:var(--muted);margin:.35rem 0 0}

/* -------- Listado de rifas (home) -------- */
.raffles-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap:14px;margin-top:10px;
}
.raffle-card{
  background:var(--bg-dark);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  text-align:left;
  cursor:pointer;
  transition:all .15s ease;
}
.raffle-card:hover{ transform:translateY(-2px); background:var(--card); }
.raffle-card .title{ font-family:var(--font-title); font-weight:900; text-transform:uppercase }
.raffle-card .meta{ color:var(--muted); font-size:.95rem; margin-top:6px; line-height:1.35 }
.pill{ display:inline-block; padding:4px 8px; border-radius:999px; background:var(--accent-2); color:#b00047; font-weight:700; font-size:.85rem; }
.sep{ height:8px }

/* Loader/esqueletos para rifas */
.skeleton-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}
.s-card{
  height:160px;border-radius:14px;background:linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,.18), rgba(255,255,255,.08));
  animation:sk 1.4s infinite; border:1px solid var(--border);
}
@keyframes sk{ 0%{background-position:-200px 0} 100%{background-position:200px 0} }

/* Imagen de portada */
.cover-wrap{
  width:100%;
  aspect-ratio:16/9;
  border-radius:12px;
  overflow:hidden;
  background:var(--bg-dark);
  border:1px solid var(--border);
  margin-bottom:10px;
}
.cover{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Títulos fuera del card y hero */
.outside-title{
  text-align:center;
  font-family:var(--font-title);
  color:var(--text);
  font-size:clamp(1.8rem, 4vw, 2.6rem);
  margin-top:24px;
  margin-bottom:48px;
  text-transform:uppercase;
  letter-spacing:-0.02em;
  line-height:1.05;
}
#drawTitle,
#drawTitle.outside-title{ font-family:var(--font-title); font-weight:900; letter-spacing:-0.02em; text-transform:uppercase; }
#homeTitle{
  text-align:center;
  font-family: var(--font-title);
  text-transform: uppercase;
  color: var(--text);
  font-weight: 900;
  letter-spacing: -0.02em;
  line-height: 1.05;
  font-size: clamp(1.8rem, 4vw, 2.4rem);
  margin-top: 32px;
  margin-bottom: 40px;
}
#homeTitle .subtitle{
  display:block;
  font-family:var(--font-body);
  font-weight:600;
  text-transform:uppercase;
  color:var(--muted);
  font-size:clamp(1rem, 2.5vw, 1.3rem);
  margin-top:6px;
  letter-spacing:.4px;
}

/* =========================================================
   Picker gigante de tickets
   ========================================================= */
.picker{
  background: var(--bg-dark);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  margin:8px 0 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,.18) inset;
}
.picker-title{
  font-family:var(--font-title);
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:.5px;
  margin-bottom:10px;
  color:var(--text);
}
.qty-giant{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:10px}
.giant-btn{
  background:var(--accent);
  color:#b00047;
  width:58px;height:58px;border-radius:14px;font-size:1.8rem;line-height:1;font-weight:900;
}
.giant-input{
  width:120px;text-align:center;font-size:2rem;font-weight:900;
  padding:12px;border-radius:14px;border:1px solid var(--border);
  background:var(--card);color:var(--text);
}
.quick-steps{display:flex;gap:8px;justify-content:center;margin-bottom:6px;flex-wrap:wrap}
.quick{
  background:var(--bg-dark);color:var(--text);
  border:1px solid var(--border);border-radius:12px;padding:8px 10px;
  font-family:var(--font-title);font-weight:800;
}
.quick:hover{background:var(--card)}

/* =========================================================
   Barra de progreso
   ========================================================= */
.progress-wrap{
  margin-top:10px;
  background:var(--bg-dark);
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  box-shadow: inset 0 6px 16px rgba(0,0,0,.12);
}
.progress-top{
  display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px;
  font-size:.95rem;color:var(--muted);
}
.progress-bar{
  width:100%;height:14px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden;position:relative;
  box-shadow: inset 0 1px 2px rgba(0,0,0,.35);
}
.progress-fill{
  height:100%;width:0%;background:linear-gradient(90deg, #ff5ba6, #ff8cc2);
  transition:width .35s ease;border-radius:999px;
}
.progress-bottom{display:flex;align-items:center;justify-content:space-between;margin-top:8px;font-size:.9rem;color:var(--muted)}
.progress-kpis{display:flex;gap:10px;flex-wrap:wrap}
.kdot{display:inline-flex;align-items:center;gap:6px;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:6px 8px}
.kdot b{color:var(--text)}
.badge{
  display:inline-flex;align-items:center;gap:6px;
  background:rgba(0,0,0,.18);border:1px solid var(--border);color:var(--text);
  padding:6px 10px;border-radius:999px;font-size:.85rem;font-weight:700;
}

/* =========================================================
   Caja método de pago / avisos / KPIs
   ========================================================= */
.method-box{
  border:1px solid var(--border);
  background:var(--bg-dark);
  border-radius:14px;
  padding:12px;
  margin:6px 0 14px;
  box-shadow:0 6px 16px rgba(0,0,0,.12) inset;
}
.method-head{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}
.method-head h4{margin:0;font-size:1rem;letter-spacing:.2px}
.method-items{display:flex;flex-direction:column;gap:6px}
.method-row{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;padding:8px 0;border-bottom:1px dashed var(--border)}
.method-row:last-child{border-bottom:none}
.method-k{color:var(--muted);font-size:.9rem}
.method-v{font-weight:800;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.copy{
  background:var(--accent-2);color:#b00047;border:none;padding:8px 10px;border-radius:10px;
  font-family:var(--font-title);font-size:.8rem;font-weight:800;cursor:pointer;
}
.copy:hover{filter:brightness(1.02)}
.muted-small{color:var(--muted);font-size:.85rem;margin-top:6px}

.notice{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  font-size:.95rem;color:var(--muted);
  margin: 8px 0 14px;
}
.notice.warn{background:linear-gradient(180deg, #e74892 0%, var(--card) 100%);border-color:rgba(0,0,0,.08)}

.breakdown{display:grid;grid-template-columns:1fr;gap:10px;margin-top:6px}
.kpi{background:var(--bg-dark);border:1px solid var(--border);border-radius:10px;padding:10px}
.kpi .label{color:var(--muted);font-size:.85rem}
.kpi .value{font-weight:800;font-size:1.05rem}

/* Campo con botón afijo (pegar referencia) */
.input-affix{position:relative}
.input-affix input{padding-right:44px}
.affix-btn{
  position:absolute;right:6px;top:50%;transform:translateY(-50%);
  background:var(--bg-dark);border:1px solid var(--border);border-radius:10px;padding:6px 8px;color:var(--text);
  font-size:.8rem;cursor:pointer;
}
.affix-btn:hover{background:var(--card)}

/* Controles rápidos de cantidad (fallback) */
.qty-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.step-btn{padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:var(--bg-dark);cursor:pointer}
.step-btn:hover{background:var(--card)}

/* --- Sección SORTEO: controles centrados --- */
#sec-draw .grid{display:flex;flex-direction:column;align-items:center;gap:32px;margin-top:4px}

/* Uploader (icono + texto) centrado */
.upload-area{display:flex;align-items:center;justify-content:center;gap:14px;margin:10px auto 16px}
#uploadBtn{width:48px;height:48px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:12px}
#uploadBtn svg{width:24px;height:24px}
#fileName{font-family:var(--font-body);font-size:1rem;font-weight:600;line-height:1.25rem;color:var(--muted)}

/* Select de columna */
#columnSelect{
  padding:12px;border-radius:10px;border:1px solid var(--border);
  background:var(--bg-dark);color:var(--text);
  font-family:var(--font-body);font-weight:400;font-size:1rem;
  width:min(720px, 86vw);
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  text-align:left;transition:all .2s ease;
}
#columnSelect:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(249,246,239,.25)}

/* Bombo */
.bombo{
  width:min(380px, 80vw);
  height:min(380px, 80vw);
  border:6px solid var(--accent);
  border-radius:50%;
  margin:18px auto;
  position:relative;
  overflow:hidden;
  background:radial-gradient(120% 120% at 50% 20%, var(--bg-dark) 0%, var(--bg) 60%, var(--bg) 100%);
  box-shadow:0 12px 40px rgba(0,0,0,.45), inset 0 0 40px rgba(249,246,239,.15);
  max-width:100%;
  contain:layout paint;
}
.bombo .slot{
  /* Centrar y limitar tamaño para evitar que ocupe todo el contenedor */
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 84%;
  max-height: 84%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 16px;
  text-align: center;
  font-family: var(--font-title);
  font-weight: 800;
  line-height: 1.05;
  letter-spacing: .02em;
  color: var(--text);
  filter: drop-shadow(0 2px 8px rgba(0,0,0,.45));
  /* Tamaño de fuente responsive y limitado */
  font-size: clamp(14px, 4.5vw, 30px);
  /* Evitar que una línea gigante rompa el layout */
  word-break: break-word;
  white-space: pre-wrap;
  overflow: hidden;
  text-overflow: ellipsis;
  border-radius: 10px;
  box-sizing: border-box;
  will-change: transform, opacity;
}
/* pefecto para animación de entrada */
.bombo .slot.animate-in{ animation: popIn .3s ease both; }
@keyframes popIn{ from{transform:scale(.9);opacity:0} to{transform:scale(1);opacity:1} }
.bombo.glow{
  box-shadow:
    0 12px 40px rgba(0,0,0,.45),
    inset 0 0 50px rgba(249,246,239,.35),
    0 0 30px rgba(249,246,239,.35);
  transition:box-shadow .25s ease;
}

/* Bola clásica y spin */
.ball{position:absolute;width:38px;height:38px;border-radius:50%;background:var(--accent);color:#d70056;display:flex;align-items:center;justify-content:center;font-family:var(--font-title);font-weight:700;font-size:1.1rem;border:1px solid var(--border)}
.spin{animation:spin 1.2s linear infinite}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}

/* Confetti */
.confetti{
  position:fixed;top:-10vh;width:10px;height:14px;background:hsl(var(--h,0) 80% 60%);
  opacity:.9;transform:translateX(var(--x,0)) rotate(var(--r,0));
  animation:fall var(--t,2.4s) ease-in forwards;z-index:9999;
}
@keyframes fall{
  to{ top:110vh; transform:translateX(calc(var(--x,0) + var(--dx,0))) rotate(calc(var(--r,0) + var(--dr,360deg))); }
}

/* Lista ganadores */
#winners li{
  margin:.35rem 0;
  padding:.35rem .6rem;
  background:var(--bg-dark);
  border:1px solid var(--accent-2);
  border-radius:10px;
  color:var(--text);
  font-family:var(--font-body);
}

/* Modal base (Términos y Cantidad) */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.38);display:flex;align-items:center;justify-content:center;padding:18px}
.modal-card{
  max-width:560px;width:100%;background:var(--card);
  border:1px solid var(--border);border-radius:16px;
  box-shadow:0 12px 40px rgba(0,0,0,.45);display:flex;flex-direction:column;max-height:88vh;color:var(--text);
  font-family:var(--font-body);
}
.modal-header{padding:14px 16px;border-bottom:1px solid var(--border)}
.modal-body{padding:14px 16px;overflow:auto}
.modal-body ol{padding-left:18px}
.modal-footer{padding:14px 16px;border-top:1px solid var(--border);display:flex;gap:10px;justify-content:flex-end}
.check{display:flex;align-items:center;gap:8px;margin-top:8px}
.hidden{display:none}
.no-scroll{overflow:hidden}

/* Botón principal del sorteo bajo el círculo */
#drawToggle{margin:16px auto 0;display:block}

/* Responsive tweaks */
@media (max-width: 860px){
  .container{ padding:0 14px; }
  .card{ padding:16px; }
  .grid{ grid-template-columns:1fr; }
  .logo{ width:90px; }
  .raffles-grid{ grid-template-columns:repeat(auto-fill, minmax(160px, 1fr)); }
  .s-card{ height:120px; }
  .giant-btn{ width:54px; height:54px; font-size:1.6rem; }
  .giant-input{ width:110px; font-size:1.8rem; }
}

/* ===========================
   Mejoras de responsividad
   =========================== */

/* Ajuste base de tipografía escalable */
html { font-size: 16px; }
@media (max-width: 960px) { html { font-size: 15px; } }
@media (max-width: 480px) { html { font-size: 14px; } }

/* Tap targets y paddings más cómodos en móvil */
@media (max-width: 720px) {
  .container { padding: 16px; }
  .card { padding: 14px; border-radius: 12px; }
  .brand { padding: 10px 6px; gap:8px; }
  .brand-logo { width: 30px; height:30px; }
  .brand-name { font-size: 1.1rem; }
  .tiles { gap: 10px; grid-template-columns: repeat(2, 1fr); }
}

/* Ajustes para pantallas pequeñas (teléfonos) */
@media (max-width: 480px) {
  .container { margin: 16px auto; padding: 12px; }
  .card { padding: 12px; border-radius: 10px; margin-top: 12px; }
  .grid { grid-template-columns: 1fr; gap: 10px; }
  .tiles { grid-template-columns: 1fr; }
  .tile { padding: 12px; }
  .giant-input { width: 96px; font-size: 1.5rem; }
  .giant-btn { width: 46px; height: 46px; font-size: 1.4rem; }
  .quick { padding: 6px 8px; font-size: 0.9rem; }

  /* Select y uploader ocupan todo el ancho */
  #columnSelect { width: 100%; max-width: 100%; }
  .upload-area { gap: 10px; padding: 6px 4px; }
  #fileName { font-size: 0.95rem; }

  /* Bombo / slot más contenido y escalable */
  .bombo { width: min(86vw, 320px); height: min(86vw, 320px); border-width: 5px; padding: 6px; }
  .bombo .slot {
    font-size: clamp(12px, 5.5vw, 24px);
    max-width: 94%;
    max-height: 84%;
    padding: 8px 10px;
    white-space: normal; /* permite que se ajusten nombres largos */
  }

  /* Modal adaptables a pantalla */
  .modal-card { max-width: 94%; margin: 0 8px; border-radius: 12px; }
  .modal-body { max-height: 60vh; overflow: auto; padding: 12px; }

  /* Botones full y espacio para tocar */
  button, .copy, .affix-btn { min-height: 44px; padding: 10px 12px; }

  /* Confetti más ligero en móvil */
  .confetti { width: 8px; height: 12px; }

  /* Evitar overflow horizontal en elementos largos */
  .method-v { word-break: break-word; max-width: 160px; overflow-wrap: anywhere; }
  .raffle-card .meta { word-break: break-word; }

  /* Entrada de referencia y campos más legibles */
  input, select { font-size: 0.95rem; padding: 10px; }

  /* Ajustes de la barra de progreso */
  .progress-wrap { padding: 8px; }
  .progress-fill { transition: width .45s cubic-bezier(.2,.9,.2,1); }
}

/* Pequeño ajuste para tablet vertical */
@media (min-width: 481px) and (max-width: 860px) {
  .tiles { grid-template-columns: repeat(2, 1fr); }
  .raffles-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
}

/* Mejor gestión de textos largos en tarjetas y botones */
.raffle-card .title, .method-v { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* Mejora micro: evita que imágenes forcen layout en móviles */
.cover img, .brand-logo, .raffle-card img { max-width: 100%; height: auto; display: block; }

/* Fin de mejoras responsive */

/* =========================================================
   BUGFIX: “cuadro blanco” en el listado de rifas
   ========================================================= */
#raffleList,
#raffleList .raffles-grid{
  background:transparent;
}
#raffleList .card{ background:var(--card); }

/* Evita caja blanca enorme cuando está vacío */
#raffleList .raffles-grid:empty{
  padding:0; min-height:0; border:none;
}

/* Estado vacío opcional */
.empty-state{
  background:var(--bg-dark);
  border:1px dashed var(--border);
  color:var(--muted);
  border-radius:12px;
  padding:18px;
  text-align:center;
  font-weight:600;
}

/* Limpia cualquier fondo/borde por defecto en wrappers comunes */
#raffleList, #raffleList * { background-color: transparent !important; }
#raffleList fieldset {
  border: 1px solid var(--border) !important;
  border-radius: 12px !important;
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
}
#raffleList iframe,
#raffleList .embed,
#raffleList .placeholder,
#raffleList .splash,
#raffleList .empty,
#raffleList .content {
  border: 0 !important; outline: none !important; box-shadow: none !important; background: transparent !important;
}
#raffleList .raffles-grid {
  padding: 0 !important; margin: 0 !important; min-height: 0 !important; border: 0 !important; box-shadow: none !important;
}
#raffleList .raffles-grid:empty::after {
  content: "No hay rifas activas por ahora";
  display: block; text-align: center; padding: 18px;
  border: 1px dashed var(--border); border-radius: 12px;
  color: var(--muted); background: var(--bg-dark);
}
#raffleList .card { background: var(--card) !important; border-color: var(--border) !important; }

/* =========================================================
   BUGFIX: “cuadro blanco” en SORTEOS (sec-draw)
   ========================================================= */
#sec-draw, #sec-draw * { background: transparent !important; }
#sec-draw fieldset,
#sec-draw iframe,
#sec-draw .embed,
#sec-draw .placeholder,
#sec-draw .splash,
#sec-draw .content {
  border: 0 !important; outline: none !important; box-shadow: none !important; background: transparent !important;
}

/* Ajustes para las portadas en grid y en el header: tamaño máximo y recorte */
#raffleList .cover-wrap,
.raffle-card .cover-wrap{
  width:100%;
  aspect-ratio:16/9;
  max-height:160px;          /* pequeño en el grid */
  overflow:hidden;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--bg-dark);
}

#raffleHeader .cover-wrap,
#raffleHeader .cover-wrap img{
  max-height: clamp(160px, 28vw, 360px); /* más grande en el header, pero acotado */
  width:100%;
  overflow:hidden;
  border-radius:12px;
}

.cover{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Asegura que las tarjetas de la lista no se estiren verticalmente */
.raffles-grid{ 
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap:14px;
  align-items:start; /* evita que un item obligue al alto del grid */
}
.raffle-card{
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height:120px;
  max-height:360px; /* protege contra tarjetas enormes */
  overflow:hidden;
  text-align:left;
  padding:14px;
}

/* Limita el slot del bombo (ganador) para que no ocupe toda la pantalla */
.bombo{
  position:relative;
  min-height:120px;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:8px;
  overflow:hidden;
}
.bombo .slot{
  position:relative;
  max-width:84%;
  max-height:84%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:12px 16px;
  text-align:center;
  font-family:var(--font-title);
  font-weight:800;
  line-height:1.05;
  color:var(--text);
  filter:drop-shadow(0 2px 8px rgba(0,0,0,.45));
  font-size: clamp(14px, 4.5vw, 30px);
  word-break:break-word;
  white-space:pre-wrap;
  overflow:hidden;
  text-overflow:ellipsis;
  border-radius:10px;
  box-sizing:border-box;
  will-change:transform,opacity;
}

/* ===== Fix: portadas / cards que crecen demasiado ===== */

/* Card de la lista: limitar alto y evitar que la imagen expanda el layout */
.raffles-grid .raffle-card,
#raffleList .raffle-card {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
  padding: 12px;
  text-align: left;
  min-height: 120px;
  max-height: 320px;      /* evita tarjetas gigantes */
  overflow: hidden;       /* recorta contenido que se salga */
}

/* Contenedor de la imagen en grid: fuerza ratio + recorte */
.raffles-grid .cover-wrap,
.raffle-card .cover-wrap {
  width: 100%;
  aspect-ratio: 16/9;
  max-height: 180px;      /* miniatura en grid */
  overflow: hidden;
  border-radius: 10px;
  background: var(--bg-dark);
  flex: 0 0 auto;
}

/* Cabecera de rifa (cuando abres la rifa): portada grande pero limitada */
#raffleHeader .cover-wrap,
#raffleHeader .cover-wrap img {
  width: 100%;
  max-height: clamp(160px, 28vw, 420px); /* escala pero acota */
  height: auto;
  overflow: hidden;
  border-radius: 12px;
  display: block;
  margin: 8px 0;
}

/* Imagen: ocupar contenedor y recortar (object-fit) */
.cover,
.raffle-card .cover-wrap img,
#raffleHeader .cover-wrap img {
  width: 100%;
  height: 100%;
  object-fit: cover;    /* recorta en lugar de estirar */
  display: block;
}

/* Evita que botones/tarjetas tipo button estiren por contenido */
button.raffle-card { 
  align-items: flex-start;
  justify-content: flex-start;
}

/* Títulos y meta: truncar para no empujar layout */
.raffle-card .title { 
  font-family: var(--font-title);
  font-weight: 900;
  text-transform: uppercase;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Meta y texto de tarjeta: permitir salto de línea controlado */
.raffle-card .meta {
  color: var(--muted);
  font-size: .95rem;
  margin-top: 6px;
  line-height: 1.35;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3; /* muestra hasta 3 líneas */
  line-clamp: 3; /* propiedad estándar para compatibilidad */
  -webkit-box-orient: vertical;
}

/* Asegurar que la grid no reciba items con altura auto extraña */
.raffles-grid { 
  align-items: start;
  gap: 14px;
}

/* Mobile: reducir alturas para pantallas pequeñas */
@media (max-width: 480px) {
  .raffles-grid .cover-wrap { max-height: 140px; aspect-ratio: 4/3; }
  .raffles-grid .raffle-card { max-height: 260px; padding: 10px; }
  #raffleHeader .cover-wrap { max-height: 240px; }
  #raffleHeader.card { padding-bottom: 12px; }
}

/* ===== fin fixes ===== */

/* ===== Extra strong safeguards (fix images with huge natural size) ===== */
/* Some images may be massively large (3000x3000) and the browser will use their intrinsic size
   unless constrained by the parent. Add explicit max dimensions and force object-fit so
   images never increase the card size. */
.raffle-card img.cover,
.cover-wrap > img,
.raffle-card .cover-wrap img,
#raffleHeader .cover-wrap img {
  max-width: 100%;       /* never exceed parent width */
  max-height: 100%;      /* never exceed parent height */
  width: 100% !important;/* ensure it fills the wrapper but doesn't force height */
  height: 100% !important;/* take full wrapper area */
  object-fit: cover !important; /* crop instead of stretching */
  display: block !important;
  image-rendering: auto;
}

/* In case images still leak via natural size, cap the wrapper to an explicit pixel max */
.cover-wrap {
  max-height: 220px;
}

/* When the header (selected raffle) is visible, allow a bigger image but still capped */
#raffleHeader .cover-wrap {
  max-height: 420px;
}

/* If JavaScript toggles .hidden incorrectly, ensure the card background doesn't show blank
   full-viewport box: force sensible min/max sizes and hide overflow */
.card#raffleHeader,
.card#raffleList {
  min-height: auto;
  max-height: none;
  overflow: visible;
}

/* Ensure button-based cards don't expand due to default button styles */
button.raffle-card, .raffle-card { line-height: 1; }

/* Conservative rule for large screens */
@media (min-width: 1024px) {
  .raffles-grid .cover-wrap { max-height: 320px; }
}

/* End extra safeguards */

/* ===== Emergency overrides (very specific, use only if images still expand cards) ===== */
/* These rules are highly specific and use !important to override other styles or inline behavior.
   If your browser still shows the old styles, clear cache (Ctrl+Shift+R) or check Network->Disable cache. */

/* Ensure main container keeps its intended max-width */
.container { max-width: 960px !important; box-sizing: border-box !important; }

/* Specific to button-based raffle cards (most important selector) */
button.raffle-card, .raffle-card {
  max-width: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
  overflow: hidden !important;
}

/* Force a strict cap on the wrapper height and ensure the image cannot force the wrapper bigger */
button.raffle-card > .cover-wrap,
button.raffle-card .cover-wrap,
.raffles-grid .raffle-card > .cover-wrap {
  max-height: 220px !important;
  height: auto !important;
  overflow: hidden !important;
  display: block !important;
}

/* Critical: make the image fill the wrapper but never drive its height; prefer height:auto */
button.raffle-card .cover-wrap img.cover,
.raffles-grid .cover-wrap img.cover,
#raffleHeader .cover-wrap img.cover {
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;       /* IMPORTANT: prevent 100% height stretching */
  max-height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}

/* If the header should show a larger image, allow it but cap absolute pixels */
#raffleHeader .cover-wrap { max-height: 420px !important; }

/* Defensive: cap any <img> to viewport width if something is still forcing overflow */
img { max-width: 100vw !important; box-sizing: border-box !important; }

/* End emergency overrides */
